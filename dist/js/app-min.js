"use strict";function initMap(){function e(e){var a="EWDIWXWFSZ0QTCQ5JG2UV0O4NLXYIKLZJ35QEK4OKDDLMBJN",r="KB3JYUOSBLA4A2Y2U0QO3TH2JQ4YF0PQJSEVIXL11JCQVBMA",o="https://api.foursquare.com/v2/venues/search?limit=1&ll="+e.lat+","+e.lng+"&client_id="+a+"&client_secret="+r+"&v=20160930";$.ajax({type:"GET",url:o,cache:!0,dataType:"jsonp"}).done(function(t){e.results=t.response.venues[0].url,console.log(t)}).fail(function(e,t){alert("Sorry FourSquare Ajax request failed...("+t+" - "+e.responseText+").")});var n=e.wiki,l="http://en.wikipedia.org/w/api.php?format=json&action=query&generator=search&gsrsearch="+n+"&gsrprop=snippet&prop=info&inprop=url&callback=wikiCallback";$.ajax({type:"GET",url:l,cache:!0,dataType:"jsonp"}).done(function(t){var a=t.query.pages,i=a[Object.keys(a)[0]];e.wikiTitle=i.canonicalurl,console.log(e.wikiTitle)}).fail(function(e,t){alert("Sorry Wikipedia Ajax request failed... ("+t+" - "+e.responseText+").")});var s,p=new google.maps.LatLng(e.lat,e.lng),c=e.title,m=e.markerID;m<=3?s="dist/images/birds-min.png":m>=4&&(s="dist/images/default-min.png"),e.marker=new google.maps.Marker({position:p,title:c,map:map,icon:s,animation:google.maps.Animation.DROP,id:i}),bounds.extend(e.marker.position);var g=300,u="https://maps.googleapis.com/maps/api/streetview?size=375x100&location=",y=u+e.lat+","+e.lng+"&fov=75&heading="+g+"&pitch=10&key=AIzaSyBrJDgnXnmHgqhboMWRxlBTAC303aBf0QM",d=new google.maps.InfoWindow;return google.maps.event.addListener(e.marker,"click",function(){var a='<img src="'+y+'" alt="Street View Image of '+e.title+'"><br><hr style="margin-bottom: 5px"><strong>'+e.title+'</strong><br><p class="wiki">'+e.street+"<br>"+e.city+'<br></p><p>Site URL: <a href="http://'+e.url+'" target="_blank">'+e.url+'</a><br><p>FourSquare: <a href="'+e.results+'" target="_blank"><i class="fa fa-foursquare" aria-hidden="true"></i>  '+e.results+'</a><br><p>Wikipedia: <a href="'+e.wikiTitle+'" target="_blank"><i class="fa fa-wikipedia-w" aria-hidden="true"></i>  '+e.wikiTitle+"</a>";d.setContent(a),null!=activeWindow&&activeWindow.close(),d.open(map,e.marker),activeWindow=d,windowWidth<=1080?map.getZoom(10):windowWidth>1080&&map.getZoom(17),map.setCenter(e.marker.getPosition()),t(e.marker)}),e.marker}function t(e){null!==e.getAnimation()?e.setAnimation(null):(e.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){e.setAnimation(null)},1400))}var a=[{featureType:"administrative.country",elementType:"geometry",stylers:[{color:"#060606"}]},{featureType:"administrative.province",elementType:"geometry",stylers:[{color:"#43706d"},{weight:"0.82"}]},{featureType:"administrative.province",elementType:"labels.text",stylers:[{color:"#76a000"},{weight:"0.43"},{lightness:"28"},{gamma:"0.61"}]},{featureType:"administrative.locality",elementType:"geometry.stroke",stylers:[{color:"#ff0000"}]},{featureType:"administrative.locality",elementType:"labels.text",stylers:[{weight:"0.39"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d4001a"}]},{featureType:"administrative.locality",elementType:"labels.text.stroke",stylers:[{color:"#ae8989"},{gamma:"3.68"},{lightness:"87"},{weight:"3.15"}]},{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{color:"#ebebeb"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#e5dfdf"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#f0f0f0"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#ff761e"},{gamma:"1.61"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffa600"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#a9ff00"}]},{featureType:"road.arterial",elementType:"labels.text.stroke",stylers:[{color:"#e3e1bf"}]}];map=new google.maps.Map(document.getElementById("map"),{center:new google.maps.LatLng(39.854456,-86.299879),zoom:12,styles:a,mapTypeControl:!1,disableDefaultUI:!0}),bounds=new google.maps.LatLngBounds;for(var i=0;i<nearbyLocations.length;i++)nearbyLocations[i].marker=e(nearbyLocations[i]);window.onresize=function(){map.fitBounds(bounds)},ko.applyBindings(new viewModel)}var activeWindow,windowWidth=document.documentElement.clientWidth,canonicalurl,nearbyLocations=[{title:"Eagle Creek Beach",street:"7602 Eagle Beach Dr.",city:"Indianapolis, IN 46204",url:"www.indy.gov/eGov/City/dpr/Pages/IndyParksHome.aspx",wiki:"Eagle_Creek_Park",markerID:"0",lat:39.854418,lng:-86.30063},{title:"Eagle Creek Park",street:"7840 W 56th St.",city:"Indianapolis, IN 46278",url:"www.indy.gov/eGov/City/DPR/ECPark/Pages/default.aspx",wiki:"Eagle_Creek_Park",markerID:"1",lat:39.869585,lng:-86.296129},{title:"Eagle Creek Golf Club",street:"8802 W 56th St.",city:"Indianapolis, IN 46234",url:"eaglecreekgolfclub.com/",wiki:"Eagle_Creek_Park",markerID:"2",lat:39.852365,lng:-86.318492},{title:"Colts Training Facility",street:"7001 W 56th St.",city:"Indianapolis, IN 46254",url:"www.colts.com/",wiki:"Indianapolis_Colts",markerID:"3",lat:39.85009679,lng:-86.28416593},{title:"Bankers Life Fieldhouse",street:"125 S Pennsylvania St.",city:"Indianapolis, IN 46204",url:"www.bankerslifefieldhouse.com/",wiki:"Bankers_Life_Fieldhouse",markerID:"4",lat:39.764117,lng:-86.155555},{title:"Indianapolis Motor Speedway",street:"4790 W 16th St.",city:"Indianapolis, IN 46222",url:"www.indianapolismotorspeedway.com/",wiki:"Indianapolis_Motor_Speedway",markerID:"5",lat:39.79531,lng:-86.23533},{title:"Indianapolis Art Center",street:"820 East 67th Street",city:"Indianapolis, IN 46220",url:"www.indplsartcenter.org/",wiki:"Indianapolis_Art_Center",markerID:"6",lat:39.878026,lng:-86.143631},{title:"Indianapolis Zoo",street:"1200 W Washington St.",city:"Indianapolis, IN 46222",url:"www.indianapoliszoo.com/SitePages/Home.aspx",wiki:"Indianapolis_Zoo",markerID:"7",lat:39.76672,lng:-86.176938}],Location=function(e){this.title=ko.observable(e.title)},viewModel=function(){var e=this;e.places2=ko.observableArray(nearbyLocations),e.currentLocation=ko.observable(e.places2()[0]),e.setLocation=function(t){e.currentLocation(t),google.maps.event.trigger(t.marker,"click")},e.showRow=ko.observable(!1),e.toggleVisibility=function(){var t=document.querySelector("#drawer");e.showRow(e.showRow()),t.classList.toggle("open")},e.showRow=ko.observable(!0),e.toggleHide=function(){var t=document.querySelector("#drawer");e.showRow(e.showRow()),t.classList.remove("open")},e.query=ko.observable(""),e.search=ko.computed(function(){return ko.utils.arrayFilter(e.places2(),function(t){return t.title.toLowerCase().indexOf(e.query().toLowerCase())>=0})}),e.search=ko.computed(function(){for(var t=0;t<nearbyLocations.length;t++)nearbyLocations[t].marker.setVisible(!0);return ko.utils.arrayFilter(nearbyLocations,function(t){return t.title.toLowerCase().indexOf(e.query().toLowerCase())>=0||(t.marker.setVisible(!1),!1)})})},map,bounds;